# 一 channel:
## (1)概述:
- 通道提供一个goroutine发送特定值到另一个goroutine的通信机制, 每个通道是一个具体类型的导管, 称作通道的数据类型.
- 未初始化的通道值为nil.

## (2)类型:
- channel类型: `( "chan" | "chan" "<-" | "<-" "chan" ) ElementType`, <-操作符指定channel的方向(发送或接受), 若不指定则是双向的.
- 只发送channel: chan <- int表示一个只发送int的channel, 不能用于接收.
- 只接收chennel: <- chan int表示一个只接受int的channel.
- 备注: 默认是双向的; 任何双向向单项的赋值都会导致隐式转换(例如:函数参数为单向,调用函数时双向会隐式转换为单向), 但不能从单向转为双向.

## (3)创建(使用内置make函数):
- ch := make(chan int), 无缓冲通道(又称同步通道, 容量为0)
- ch := make(chan int, n), n>0, 容量为n的缓冲通道.
- 备注: 同步通道让发送和接收goroutine同步化, 若发送先则需要阻塞等接收, 若接收先则需要阻塞等发送.

## (4)常用操作:
- **发送**: 从一个goroutine发送一个值到另一个在执行接收表达式的goroutine, 格式:`ch <- x`, 通道在<-左边, 值在右边.
- **接收**: 格式: `x = <-ch`, 赋值语句中的表达式; **<-ch**, 接收语句丢弃结果, **接收操作会阻塞到值可用**; 从nil管道接收永远阻塞; 从closed管道接收立马返回,会返回上个接收值对应类型的零值.
- **关闭**: 使用内置close函数来关闭, 在**关闭**后的通道上执行发送操作将导致**宕机**; 执行接收操作, 获得所有已发送的值, 直至通道为空; 任何接收操作会立刻完成, 并获得一个通道类型对应的零值.
- 备注: 可通过接收操作的变种来判断一个通道是否关闭, 例如: x, ok = <-ch, 当ok是true表示接收成功; ok为false时表示通道已关闭且读完.

## (5)备注:
- 通道关闭不是必须的(和close文件描述符不一样), 只有在通知接收方goroutine所有数据都已发完时才需要关闭通道.
- 不管通道有没有被关闭, Go的垃圾回收器判断没被引用时就会回收该通道.

# 二 使用场景:
## (1)pipeline:
- 链接多个goroutine构造pipeline, 一个channel的输出作为下一个channel的输入.

## (2)取消channel:
- 该类通道不发送任何值, 通过关闭它表示程序需要停止它所在的事情.
- 让有一个goroutine停止它当前的任务, 类似java的interrupt.
- 例如: stop := make(chan struct{})
